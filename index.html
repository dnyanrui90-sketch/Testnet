<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>My EdTech Platform</title>

<style>
body{
  font-family: Arial;
  margin:0;
  background:#f4f6f9;
}

header{
  background:#2c3e50;
  color:white;
  padding:15px;
  text-align:center;
  font-size:22px;
  font-weight:bold;
}

.container{
  padding:20px;
  max-width:1000px;
  margin:auto;
}

.card{
  background:white;
  padding:15px;
  margin-bottom:15px;
  border-radius:8px;
  box-shadow:0 2px 6px rgba(0,0,0,0.1);
}

input, select, textarea{
  width:100%;
  padding:8px;
  margin:5px 0;
}

button{
  padding:8px 12px;
  border:none;
  border-radius:4px;
  cursor:pointer;
  margin-top:5px;
}

.btn-green{ background:#27ae60; color:white; }
.btn-blue{ background:#3498db; color:white; }
.btn-red{ background:#e74c3c; color:white; }

.question-block{
  background:#f9f9f9;
  padding:10px;
  margin-top:10px;
  border-radius:5px;
}

.opt-row{
  display:flex;
  gap:10px;
  margin-top:5px;
}

.opt-row input[type="text"]{
  flex:1;
}
</style>
</head>

<body>

<header>My EdTech Platform</header>

<div class="container">

<!-- ADMIN PANEL -->
<div class="card">
<h3>Admin Panel</h3>

<select id="selCourse"></select>

<input type="text" id="newCourse" placeholder="Add New Course">
<button class="btn-green" onclick="addCourse()">Add Course</button>

<input type="text" id="subject" placeholder="Subject Name">
<input type="text" id="chapter" placeholder="Chapter Name">

<h4>Add Questions</h4>
<div id="questionContainer"></div>
<button class="btn-blue" onclick="addQuestion()">+ Add Question</button>

<h4>Add Worksheet (PDF Link)</h4>
<input type="text" id="worksheetLink" placeholder="Paste PDF URL">

<button class="btn-green" onclick="addContent()">Save Content</button>

<button class="btn-red" onclick="clearAll()">Clear All Data</button>
</div>


<!-- STUDENT VIEW -->
<div class="card">
<h3>Student View</h3>
<div id="studentContent"></div>
</div>

</div>

<script>

var content = JSON.parse(localStorage.getItem('edtechData')) || {};

function saveData(){
  localStorage.setItem('edtechData', JSON.stringify(content));
}

function loadCourses(){
  var select = document.getElementById('selCourse');
  select.innerHTML = '<option value="">Select Course</option>';
  Object.keys(content).forEach(c=>{
    select.innerHTML += `<option value="${c}">${c}</option>`;
  });
  renderStudent();
}

function addCourse(){
  var name = document.getElementById('newCourse').value.trim();
  if(!name) return alert("Enter course name");
  if(!content[name]) content[name] = {};
  saveData();
  document.getElementById('newCourse').value='';
  loadCourses();
}

function addQuestion(){
  var container = document.getElementById('questionContainer');
  var index = container.children.length;

  container.innerHTML += `
  <div class="question-block">
    <textarea class="qText" placeholder="Enter Question"></textarea>
    <div class="opt-row">
      <input type="radio" name="ans${index}" value="0" checked>
      <input type="text" class="optA" placeholder="Option A">
    </div>
    <div class="opt-row">
      <input type="radio" name="ans${index}" value="1">
      <input type="text" class="optB" placeholder="Option B">
    </div>
    <div class="opt-row">
      <input type="radio" name="ans${index}" value="2">
      <input type="text" class="optC" placeholder="Option C">
    </div>
    <div class="opt-row">
      <input type="radio" name="ans${index}" value="3">
      <input type="text" class="optD" placeholder="Option D">
    </div>
  </div>
  `;
}

function addContent(){
  var course = document.getElementById('selCourse').value;
  var subject = document.getElementById('subject').value.trim();
  var chapter = document.getElementById('chapter').value.trim();
  var worksheet = document.getElementById('worksheetLink').value.trim();

  if(!course || !subject || !chapter)
    return alert("Fill Course, Subject and Chapter");

  if(!content[course][subject]) content[course][subject]={};
  if(!content[course][subject][chapter])
    content[course][subject][chapter]={questions:[], worksheets:[]};

  var questionBlocks = document.querySelectorAll('.question-block');

  questionBlocks.forEach(block=>{
    var q = block.querySelector('.qText').value.trim();
    var optA = block.querySelector('.optA').value.trim();
    var optB = block.querySelector('.optB').value.trim();
    var optC = block.querySelector('.optC').value.trim();
    var optD = block.querySelector('.optD').value.trim();
    var ans = block.querySelector('input[type="radio"]:checked').value;

    if(q && optA && optB && optC && optD){
      content[course][subject][chapter].questions.push({
        q:q,
        opts:[optA,optB,optC,optD],
        ans:ans
      });
    }
  });

  if(worksheet){
    content[course][subject][chapter].worksheets.push(worksheet);
  }

  saveData();
  alert("Content Saved!");

  document.getElementById('questionContainer').innerHTML='';
  document.getElementById('worksheetLink').value='';
  document.getElementById('subject').value='';
  document.getElementById('chapter').value='';

  renderStudent();
}

function renderStudent(){
  var div = document.getElementById('studentContent');
  div.innerHTML='';

  Object.keys(content).forEach(course=>{
    div.innerHTML += `<h4>${course}</h4>`;

    Object.keys(content[course]).forEach(subject=>{
      div.innerHTML += `<b>${subject}</b><br>`;

      Object.keys(content[course][subject]).forEach(chapter=>{
        div.innerHTML += `<i>${chapter}</i><br>`;

        var data = content[course][subject][chapter];

        data.questions.forEach((qObj,i)=>{
          div.innerHTML += `<p>${i+1}. ${qObj.q}</p>`;
        });

        data.worksheets.forEach(link=>{
          div.innerHTML += `<a href="${link}" target="_blank">Download Worksheet</a><br>`;
        });

        div.innerHTML += `<hr>`;
      });
    });
  });
}

function clearAll(){
  if(confirm("Delete all data?")){
    localStorage.removeItem('edtechData');
    content={};
    loadCourses();
  }
}

window.onload = loadCourses;

</script>

</body>
</html>
