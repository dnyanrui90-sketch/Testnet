<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TESTNEST ‚Äì Learn ‚Ä¢ Practice ‚Ä¢ Test</title>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&family=Baloo+2:wght@700;800&display=swap" rel="stylesheet"/>
  <style>
    :root{
      --bg:#f0f4ff;--white:#ffffff;--text:#1a1f36;--muted:#6b7280;
      --brand:#4f46e5;--brand2:#7c3aed;--accent:#f59e0b;--accent2:#10b981;
      --red:#ef4444;--pink:#ec4899;--sky:#0ea5e9;
      --shadow:0 4px 24px rgba(79,70,229,0.10);
      --radius:16px;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:'Nunito',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;}

    /* TOPBAR */
    .topbar{background:var(--white);box-shadow:0 2px 12px rgba(79,70,229,0.08);position:sticky;top:0;z-index:100;}
    .topbar-inner{max-width:1200px;margin:0 auto;padding:10px 20px;display:flex;align-items:center;justify-content:space-between;gap:12px;}
    .logo-wrap{display:flex;align-items:center;gap:10px;text-decoration:none;}
    .logo-icon{width:42px;height:42px;border-radius:14px;background:linear-gradient(135deg,#4f46e5,#7c3aed);display:flex;align-items:center;justify-content:center;box-shadow:0 4px 14px rgba(79,70,229,0.35);}
    .logo-icon svg{width:24px;height:24px;fill:white;}
    .logo-text{font-family:'Baloo 2',cursive;font-size:22px;font-weight:800;background:linear-gradient(135deg,#4f46e5,#7c3aed);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
    .logo-tag{font-size:10px;background:#eef2ff;color:#4f46e5;border-radius:6px;padding:2px 7px;font-weight:700;}
    .user-pill{display:flex;align-items:center;gap:8px;background:#f5f3ff;border:1.5px solid #e0e7ff;border-radius:999px;padding:6px 14px 6px 8px;font-size:13px;font-weight:700;color:#4f46e5;}
    .avatar{width:28px;height:28px;border-radius:50%;background:linear-gradient(135deg,#4f46e5,#ec4899);display:flex;align-items:center;justify-content:center;color:white;font-size:13px;font-weight:800;}

    /* WRAP */
    .wrap{max-width:1200px;margin:0 auto;padding:24px 20px 60px;}

    /* HERO LOGIN */
    .hero{background:linear-gradient(135deg,#4f46e5 0%,#7c3aed 50%,#ec4899 100%);border-radius:24px;padding:40px;color:white;display:flex;align-items:center;justify-content:space-between;gap:24px;flex-wrap:wrap;margin-bottom:0;overflow:hidden;position:relative;}
    .hero::before{content:'';position:absolute;top:-60px;right:-60px;width:220px;height:220px;background:rgba(255,255,255,0.08);border-radius:50%;}
    .hero::after{content:'';position:absolute;bottom:-40px;left:30%;width:160px;height:160px;background:rgba(255,255,255,0.06);border-radius:50%;}
    .hero-left h1{font-family:'Baloo 2',cursive;font-size:36px;font-weight:800;line-height:1.2;margin-bottom:8px;}
    .hero-left p{font-size:14px;opacity:0.85;max-width:42ch;line-height:1.6;margin-bottom:16px;}
    .features{display:flex;flex-wrap:wrap;gap:8px;}
    .feat{background:rgba(255,255,255,0.18);backdrop-filter:blur(4px);border:1px solid rgba(255,255,255,0.25);border-radius:999px;padding:5px 13px;font-size:12px;font-weight:700;}
    .login-box{background:white;border-radius:20px;padding:24px;min-width:270px;max-width:320px;box-shadow:0 8px 32px rgba(0,0,0,0.15);}
    .login-box h3{font-family:'Baloo 2',cursive;font-size:20px;color:var(--text);margin-bottom:4px;}
    .login-box p{font-size:12px;color:var(--muted);margin-bottom:16px;}
    .btn-google{width:100%;padding:13px;border:none;border-radius:14px;font-family:'Nunito',sans-serif;font-size:14px;font-weight:800;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;transition:transform .1s,box-shadow .1s;margin-bottom:10px;}
    .btn-google:active{transform:scale(.97)}
    .btn-student{background:linear-gradient(135deg,#4f46e5,#7c3aed);color:white;box-shadow:0 4px 14px rgba(79,70,229,0.35);}
    .btn-student:hover{box-shadow:0 6px 20px rgba(79,70,229,0.45);}
    .btn-admin{background:linear-gradient(135deg,#f59e0b,#ef4444);color:white;box-shadow:0 4px 14px rgba(245,158,11,0.35);}
    .btn-admin:hover{box-shadow:0 6px 20px rgba(245,158,11,0.45);}
    button:disabled{opacity:0.6;cursor:not-allowed;}
    .login-msg{margin-top:10px;padding:10px 12px;border-radius:12px;font-size:12px;display:none;}
    .login-msg.info{background:#eff6ff;border:1px solid #bfdbfe;color:#1d4ed8;}
    .login-msg.error{background:#fef2f2;border:1px solid #fecaca;color:#dc2626;}

    /* APP LAYOUT */
    .app-grid{display:grid;grid-template-columns:1fr 360px;gap:20px;margin-top:24px;}
    @media(max-width:900px){.app-grid{grid-template-columns:1fr}}

    /* CARDS */
    .card{background:var(--white);border-radius:var(--radius);box-shadow:var(--shadow);padding:20px;}
    .card-title{font-family:'Baloo 2',cursive;font-size:20px;font-weight:700;margin-bottom:4px;}
    .card-sub{font-size:13px;color:var(--muted);}
    .divider{height:1px;background:#f1f5f9;margin:16px 0;}

    /* COURSE CARDS */
    .course-card{border-radius:14px;border:2px solid #e0e7ff;background:linear-gradient(135deg,#f5f3ff,#faf5ff);padding:16px 18px;display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px;transition:box-shadow .15s,transform .15s;}
    .course-card:hover{box-shadow:0 4px 20px rgba(79,70,229,0.12);transform:translateY(-1px);}
    .course-icon{width:44px;height:44px;border-radius:12px;background:linear-gradient(135deg,#4f46e5,#7c3aed);display:flex;align-items:center;justify-content:center;font-size:20px;flex-shrink:0;}
    .course-info b{font-size:15px;font-weight:800;display:block;}
    .course-info span{font-size:12px;color:var(--muted);}
    .btn-start{background:linear-gradient(135deg,#10b981,#059669);color:white;border:none;border-radius:12px;padding:10px 20px;font-family:'Nunito',sans-serif;font-weight:800;font-size:14px;cursor:pointer;transition:transform .1s,box-shadow .1s;box-shadow:0 3px 10px rgba(16,185,129,0.3);}
    .btn-start:hover{transform:translateY(-1px);box-shadow:0 5px 16px rgba(16,185,129,0.4);}
    .btn-start:active{transform:scale(.97)}
    .lock-tag{background:#fef3c7;border:1.5px solid #fcd34d;color:#92400e;border-radius:999px;padding:6px 14px;font-size:12px;font-weight:800;}

    /* TEST BOX */
    .test-header{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:12px;margin-bottom:16px;}
    .timer-box{background:linear-gradient(135deg,#ef4444,#dc2626);color:white;border-radius:12px;padding:8px 16px;font-family:'Baloo 2',cursive;font-size:20px;font-weight:700;box-shadow:0 4px 12px rgba(239,68,68,0.3);}
    .qbox{background:#f8fafc;border:2px solid #e2e8f0;border-radius:14px;padding:16px;margin:10px 0;}
    .qbox b{font-size:15px;font-weight:800;display:block;margin-bottom:10px;}
    .opt{display:flex;align-items:center;gap:10px;padding:10px 14px;margin:7px 0;border-radius:12px;border:2px solid #e2e8f0;background:white;cursor:pointer;transition:all .12s;font-size:14px;font-weight:600;}
    .opt:hover{border-color:#a5b4fc;background:#f5f3ff;}
    .opt input{accent-color:#4f46e5;width:16px;height:16px;}
    .opt.selected{border-color:#4f46e5;background:#eef2ff;}
    .btn-submit{background:linear-gradient(135deg,#10b981,#059669);color:white;border:none;border-radius:14px;padding:13px 28px;font-family:'Nunito',sans-serif;font-weight:800;font-size:15px;cursor:pointer;box-shadow:0 4px 14px rgba(16,185,129,0.3);transition:transform .1s;}
    .btn-submit:hover{transform:translateY(-1px);}
    .btn-close{background:#f1f5f9;color:#64748b;border:none;border-radius:14px;padding:13px 20px;font-family:'Nunito',sans-serif;font-weight:800;font-size:15px;cursor:pointer;}

    /* PROFILE */
    .profile-card{background:linear-gradient(135deg,#4f46e5,#7c3aed);border-radius:var(--radius);padding:20px;color:white;margin-bottom:16px;}
    .profile-avatar{width:52px;height:52px;border-radius:50%;background:rgba(255,255,255,0.25);display:flex;align-items:center;justify-content:center;font-size:22px;font-weight:800;margin-bottom:10px;}
    .profile-name{font-family:'Baloo 2',cursive;font-size:18px;font-weight:700;}
    .profile-email{font-size:12px;opacity:0.8;margin-top:2px;}
    .role-badge{display:inline-block;margin-top:8px;background:rgba(255,255,255,0.2);border:1px solid rgba(255,255,255,0.3);border-radius:999px;padding:3px 12px;font-size:11px;font-weight:800;}
    .btn-logout{width:100%;margin-top:12px;background:rgba(255,255,255,0.15);border:1.5px solid rgba(255,255,255,0.3);color:white;border-radius:12px;padding:9px;font-family:'Nunito',sans-serif;font-weight:700;font-size:13px;cursor:pointer;transition:background .12s;}
    .btn-logout:hover{background:rgba(255,255,255,0.25);}

    /* ADMIN PANEL */
    .admin-card{background:white;border-radius:var(--radius);box-shadow:var(--shadow);padding:20px;margin-bottom:16px;}
    .admin-title{font-family:'Baloo 2',cursive;font-size:18px;color:#f59e0b;margin-bottom:4px;}
    .form-label{font-size:12px;font-weight:700;color:var(--muted);margin:10px 0 5px;display:block;}
    .form-input{width:100%;padding:11px 14px;border-radius:12px;border:2px solid #e2e8f0;background:#f8fafc;font-family:'Nunito',sans-serif;font-size:14px;color:var(--text);outline:none;transition:border .12s;}
    .form-input:focus{border-color:#a5b4fc;background:white;}
    textarea.form-input{min-height:80px;resize:vertical;}
    .form-row{display:grid;grid-template-columns:1fr 1fr;gap:10px;}
    .check-row{display:flex;align-items:center;gap:8px;margin:10px 0;font-size:13px;font-weight:700;}
    .check-row input{width:16px;height:16px;accent-color:#4f46e5;}
    .btn-save{background:linear-gradient(135deg,#10b981,#059669);color:white;border:none;border-radius:12px;padding:11px 20px;font-family:'Nunito',sans-serif;font-weight:800;font-size:14px;cursor:pointer;box-shadow:0 3px 10px rgba(16,185,129,0.25);transition:transform .1s;margin-top:6px;}
    .btn-save:hover{transform:translateY(-1px);}
    .btn-clear{background:#f1f5f9;color:#475569;border:none;border-radius:12px;padding:11px 16px;font-family:'Nunito',sans-serif;font-weight:700;font-size:14px;cursor:pointer;margin-top:6px;}

    /* LEADERBOARD */
    .lb-row{display:flex;align-items:center;gap:12px;padding:10px 14px;border-radius:12px;margin-bottom:8px;background:#f8fafc;border:1.5px solid #e2e8f0;}
    .lb-rank{width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:13px;font-weight:800;}
    .lb-rank.r1{background:linear-gradient(135deg,#f59e0b,#fbbf24);color:white;}
    .lb-rank.r2{background:linear-gradient(135deg,#94a3b8,#cbd5e1);color:white;}
    .lb-rank.r3{background:linear-gradient(135deg,#f97316,#fb923c);color:white;}
    .lb-rank.rn{background:#e2e8f0;color:#64748b;}
    .lb-name{flex:1;font-weight:700;font-size:14px;}
    .lb-score{font-size:13px;font-weight:800;color:#4f46e5;}

    /* QUESTION MANAGEMENT */
    .q-manage{background:#f8fafc;border:1.5px solid #e2e8f0;border-radius:12px;padding:12px 14px;margin-bottom:8px;}
    .q-manage-top{display:flex;align-items:flex-start;justify-content:space-between;gap:8px;}
    .q-text{font-size:13px;font-weight:700;flex:1;}
    .btn-del{background:#fef2f2;border:1.5px solid #fecaca;color:#dc2626;border-radius:8px;padding:5px 10px;font-size:12px;font-weight:800;cursor:pointer;white-space:nowrap;transition:background .1s;}
    .btn-del:hover{background:#fee2e2;}
    .q-opts{display:flex;flex-wrap:wrap;gap:5px;margin-top:6px;}
    .q-opt-chip{font-size:11px;padding:3px 9px;border-radius:999px;background:#e0e7ff;color:#3730a3;font-weight:700;}
    .q-opt-chip.correct{background:#d1fae5;color:#065f46;}

    /* SECTION HEADER */
    .sec-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:14px;}

    /* TOAST */
    .toast{position:fixed;bottom:24px;left:50%;transform:translateX(-50%);background:#1a1f36;color:white;padding:12px 22px;border-radius:14px;display:none;z-index:9999;font-weight:700;font-size:14px;box-shadow:0 8px 24px rgba(0,0,0,0.2);}

    /* EMPTY */
    .empty{text-align:center;padding:30px 20px;color:var(--muted);}
    .empty-icon{font-size:40px;margin-bottom:8px;}

    /* ANIMATIONS */
    @keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
    .fade-in{animation:fadeIn .3s ease forwards;}
  </style>
</head>
<body>

<!-- TOPBAR -->
<div class="topbar">
  <div class="topbar-inner">
    <a class="logo-wrap" href="#">
      <img src="data:image/jpeg;base64,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" style="width:42px;height:42px;border-radius:14px;object-fit:cover;box-shadow:0 4px 14px rgba(79,70,229,0.35);"/>
      <span class="logo-text">TestNest</span>
      <span class="logo-tag">BETA</span>
    </a>
    <div class="user-pill" id="topStatus">
      <div class="avatar" id="topAvatar">?</div>
      <span id="topName">Not logged in</span>
    </div>
  </div>
</div>

<div class="wrap">

  <!-- LOGIN HERO -->
  <div id="loginCard" class="hero fade-in">
    <div class="hero-left">
      <h1>üéØ Learn Smart,<br/>Score Big!</h1>
      <p>India's most fun test platform for students. Practice unlimited tests, compete on leaderboard and track your progress!</p>
      <div class="features">
        <span class="feat">‚è±Ô∏è Timer Tests</span>
        <span class="feat">üèÜ Leaderboard</span>
        <span class="feat">üìä Auto Result</span>
        <span class="feat">üîí Premium Courses</span>
        <span class="feat">‚úèÔ∏è Admin Panel</span>
      </div>
    </div>
    <div class="login-box">
      <h3>Welcome Back! üëã</h3>
      <p>Sign in with Google to continue</p>
      <button class="btn-google btn-student" id="btnStudent" onclick="loginAs('student')">
        <svg width="18" height="18" viewBox="0 0 24 24"><path fill="white" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="white" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="white" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="white" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
        Student Login (Google)
      </button>
      <button class="btn-google btn-admin" id="btnAdmin" onclick="loginAs('admin')">
        <svg width="18" height="18" viewBox="0 0 24 24"><path fill="white" d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/></svg>
        Admin Login (Google)
      </button>
      <div id="loginMsg" class="login-msg"></div>
    </div>
  </div>

  <!-- APP -->
  <div id="app" style="display:none;">
    <div class="app-grid">

      <!-- LEFT COLUMN -->
      <div>
        <!-- COURSES -->
        <div class="card fade-in">
          <div class="sec-header">
            <div><div class="card-title">üìö Courses</div><div class="card-sub">Pick a course and start your test</div></div>
          </div>
          <div id="courseList"><div class="empty"><div class="empty-icon">üì≠</div>Loading courses...</div></div>
        </div>

        <!-- TEST BOX -->
        <div id="testBox" style="display:none;" class="card fade-in" style="margin-top:16px;">
          <div class="test-header">
            <div>
              <div class="card-title" id="testTitle">Test</div>
              <div class="card-sub" id="qCountInfo"></div>
            </div>
            <div class="timer-box" id="timerDisplay">00:00</div>
          </div>
          <div id="questionArea"></div>
          <div style="display:flex;gap:10px;margin-top:16px;flex-wrap:wrap;">
            <button class="btn-submit" onclick="submitTest()">‚úÖ Submit Test</button>
            <button class="btn-close" onclick="closeTest()">‚úñ Close</button>
          </div>
        </div>

        <!-- ADMIN: MANAGE QUESTIONS -->
        <div id="manageBox" class="card fade-in" style="display:none;margin-top:16px;">
          <div class="sec-header">
            <div><div class="card-title">üóÇÔ∏è Manage Questions</div><div class="card-sub">View and delete questions from courses</div></div>
          </div>
          <label class="form-label">Select Course to Manage</label>
          <select class="form-input" id="manageCoursePick" onchange="loadManageQuestions()">
            <option value="">Select course</option>
          </select>
          <div id="manageQList" style="margin-top:14px;"></div>
        </div>
      </div>

      <!-- RIGHT COLUMN -->
      <div>
        <!-- PROFILE -->
        <div id="profileCard" class="profile-card fade-in">
          <div class="profile-avatar" id="profileAvatar">üë§</div>
          <div class="profile-name" id="userName">‚Äî</div>
          <div class="profile-email" id="userEmail">‚Äî</div>
          <div class="role-badge" id="userRole">STUDENT</div>
          <button class="btn-logout" onclick="logout()">üö™ Logout</button>
        </div>

        <!-- ADMIN PANEL -->
        <div class="admin-card" id="adminCard" style="display:none;">
          <div class="admin-title">‚öôÔ∏è Admin Panel</div>
          <div class="card-sub" style="margin-bottom:12px;">Create courses & add questions</div>
          <div class="divider"></div>

          <label class="form-label">Course Name</label>
          <input type="text" class="form-input" id="courseName" placeholder="e.g., Class 6 Maths / NEET / JEE"/>
          <div class="check-row">
            <input type="checkbox" id="paidCourse"> <label for="paidCourse">üîí Paid Course (Locked)</label>
          </div>
          <button class="btn-save" onclick="addCourse()">üíæ Save Course</button>

          <div class="divider"></div>

          <label class="form-label">Add Question to Course</label>
          <select class="form-input" id="coursePick"><option value="">Select course</option></select>

          <label class="form-label">Question</label>
          <textarea class="form-input" id="questionText" placeholder="Type your question here..."></textarea>

          <div class="form-row">
            <div><label class="form-label">Option A</label><input type="text" class="form-input" id="opt1" placeholder="Option A"/></div>
            <div><label class="form-label">Option B</label><input type="text" class="form-input" id="opt2" placeholder="Option B"/></div>
          </div>
          <div class="form-row">
            <div><label class="form-label">Option C</label><input type="text" class="form-input" id="opt3" placeholder="Option C"/></div>
            <div><label class="form-label">Option D</label><input type="text" class="form-input" id="opt4" placeholder="Option D"/></div>
          </div>
          <div class="form-row">
            <div><label class="form-label">Correct (0=A,1=B,2=C,3=D)</label><input type="number" class="form-input" id="correct" placeholder="0"/></div>
            <div><label class="form-label">Time (minutes)</label><input type="number" class="form-input" id="timeLimit" placeholder="5"/></div>
          </div>
          <div style="display:flex;gap:8px;flex-wrap:wrap;">
            <button class="btn-save" onclick="addQuestion()">‚ûï Save Question</button>
            <button class="btn-clear" onclick="clearQuestionForm()">üîÑ Clear</button>
          </div>
        </div>

        <!-- LEADERBOARD -->
        <div class="card fade-in">
          <div class="card-title">üèÜ Leaderboard</div>
          <div class="card-sub" style="margin-bottom:12px;">Top 10 scorers</div>
          <div id="leaderboard"><div class="empty"><div class="empty-icon">‚è≥</div>Loading...</div></div>
        </div>
      </div>

    </div>
  </div>
</div>

<div class="toast" id="toast"></div>

<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
<script>
firebase.initializeApp({
  apiKey:"AIzaSyAPML8zK9qgRQbUyv7lMVOtt0c5Osjyw_A",
  authDomain:"testnest-education.firebaseapp.com",
  projectId:"testnest-education",
  storageBucket:"testnest-education.firebasestorage.app",
  messagingSenderId:"1000142199756",
  appId:"1:1000142199756:web:afab8eaa0f6bc638969b69"
});
const auth=firebase.auth(), db=firebase.firestore();
const ADMINS=["dnyanrui90@gmail.com","pawarjai999@gmail.com"];

function g(id){return document.getElementById(id);}
function toast(m,ok=true){const e=g("toast");e.textContent=m;e.style.background=ok?"#1a1f36":"#dc2626";e.style.display="block";setTimeout(()=>e.style.display="none",2800);}
function showMsg(m,t="info"){const e=g("loginMsg");e.textContent=m;e.className="login-msg "+t;e.style.display="block";}
function hideMsg(){g("loginMsg").style.display="none";}
function setBtns(d){g("btnStudent").disabled=d;g("btnAdmin").disabled=d;}
function esc(s){return(s||"").replace(/[&<>"']/g,m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));}
function escQ(s){return(s||"").replace(/\\/g,"\\\\").replace(/'/g,"\\'");}
function initials(n){return(n||"?").split(" ").map(w=>w[0]).join("").toUpperCase().slice(0,2);}

function loginAs(role){
  localStorage.setItem("tn_role",role);
  setBtns(true);
  showMsg("Opening Google login‚Ä¶","info");
  const p=new firebase.auth.GoogleAuthProvider();
  p.setCustomParameters({prompt:"select_account"});
  auth.signInWithPopup(p).then(()=>hideMsg()).catch(err=>{
    if(err.code==="auth/popup-blocked"){showMsg("‚ö†Ô∏è Popup blocked! Allow popups for this site in your browser settings, then try again.","error");}
    else if(err.code==="auth/popup-closed-by-user"){showMsg("Login cancelled. Try again.","info");}
    else{showMsg("Error: "+err.message,"error");}
    setBtns(false);
  });
}

function logout(){
  auth.signOut().then(()=>{
    localStorage.removeItem("tn_role");
    g("app").style.display="none";
    g("loginCard").style.display="flex";
    g("topName").textContent="Not logged in";
    g("topAvatar").textContent="?";
    setBtns(false);hideMsg();
  });
}

auth.onAuthStateChanged(user=>{
  if(!user){g("loginCard").style.display="flex";g("app").style.display="none";return;}
  const role=(localStorage.getItem("tn_role")==="admin"&&ADMINS.includes((user.email||"").toLowerCase()))?"admin":"student";
  g("loginCard").style.display="none";
  g("app").style.display="block";
  hideMsg();setBtns(false);
  const name=user.displayName||"Student";
  g("userName").textContent=name;
  g("userEmail").textContent=user.email||"";
  g("userRole").textContent="Role: "+role.toUpperCase();
  g("topName").textContent=name+" ‚Ä¢ "+role.toUpperCase();
  g("topAvatar").textContent=initials(name);
  g("profileAvatar").textContent=initials(name);
  g("adminCard").style.display=role==="admin"?"block":"none";
  g("manageBox").style.display=role==="admin"?"block":"none";
  loadCourses();loadLeaderboard();
  if(role==="admin"){refreshCoursePick();refreshManagePick();}
});

// COURSE EMOJIS
const emojis=["üìò","üìó","üìô","üìï","üî¨","üßÆ","üåç","üé®","üèõÔ∏è","‚öóÔ∏è"];
function courseEmoji(name,i){return emojis[i%emojis.length];}

function loadCourses(){
  const div=g("courseList");div.innerHTML='<div class="empty"><div class="empty-icon">‚è≥</div>Loading...</div>';
  db.collection("courses").get().then(snap=>{
    if(snap.empty){div.innerHTML='<div class="empty"><div class="empty-icon">üì≠</div>No courses yet. Admin please add courses.</div>';return;}
    let html="",i=0;
    snap.forEach(doc=>{
      const name=doc.id,paid=!!doc.data().paid,em=courseEmoji(name,i++);
      html+=`<div class="course-card">
        <div class="course-icon">${em}</div>
        <div class="course-info" style="flex:1"><b>${esc(name)}</b><span>${paid?"üîí Premium Course":"‚úÖ Free Course"}</span></div>
        <div>${paid?'<span class="lock-tag">üîí Locked</span>':`<button class="btn-start" onclick="startTest('${escQ(name)}')">Start Test ‚ñ∂</button>`}</div>
      </div>`;
    });
    div.innerHTML=html;
  }).catch(e=>{div.innerHTML=`<div class="empty"><div class="empty-icon">‚ùå</div>${esc(e.message)}</div>`;});
}

function addCourse(){
  const name=g("courseName").value.trim(),paid=g("paidCourse").checked;
  if(!name)return alert("Enter course name");
  db.collection("courses").doc(name).set({paid,updatedAt:firebase.firestore.FieldValue.serverTimestamp(),createdBy:auth.currentUser.email||""},{merge:true})
    .then(()=>{toast("‚úÖ Course saved!");loadCourses();refreshCoursePick();refreshManagePick();g("courseName").value="";g("paidCourse").checked=false;}).catch(e=>alert(e.message));
}

function refreshCoursePick(){
  const sel=g("coursePick");if(!sel)return;
  sel.innerHTML='<option value="">Select course</option>';
  db.collection("courses").get().then(snap=>{snap.forEach(doc=>{const o=document.createElement("option");o.value=doc.id;o.textContent=doc.id;sel.appendChild(o);});}).catch(()=>{});
}

function refreshManagePick(){
  const sel=g("manageCoursePick");if(!sel)return;
  sel.innerHTML='<option value="">Select course</option>';
  db.collection("courses").get().then(snap=>{snap.forEach(doc=>{const o=document.createElement("option");o.value=doc.id;o.textContent=doc.id;sel.appendChild(o);});}).catch(()=>{});
}

function clearQuestionForm(){["questionText","opt1","opt2","opt3","opt4","correct"].forEach(id=>g(id).value="");}

function addQuestion(){
  const course=(g("coursePick").value||"").trim();if(!course)return alert("Select a course first");
  const q=g("questionText").value.trim(),o1=g("opt1").value.trim(),o2=g("opt2").value.trim(),o3=g("opt3").value.trim(),o4=g("opt4").value.trim();
  const correct=parseInt(g("correct").value,10),time=parseInt(g("timeLimit").value,10);
  if(!q||!o1||!o2||!o3||!o4)return alert("Fill question + all 4 options");
  if(isNaN(correct)||correct<0||correct>3)return alert("Correct must be 0, 1, 2, or 3");
  if(isNaN(time)||time<=0)return alert("Time must be > 0 minutes");
  db.collection("courses").doc(course).collection("questions").add({
    question:q,options:[o1,o2,o3,o4],correct,time,
    createdAt:firebase.firestore.FieldValue.serverTimestamp(),createdBy:auth.currentUser.email||""
  }).then(()=>{toast("‚úÖ Question saved!");clearQuestionForm();loadManageQuestions();}).catch(e=>alert(e.message));
}

// MANAGE + DELETE QUESTIONS
function loadManageQuestions(){
  const course=g("manageCoursePick").value;
  const div=g("manageQList");
  if(!course){div.innerHTML='';return;}
  div.innerHTML='<div class="empty"><div class="empty-icon">‚è≥</div>Loading questions...</div>';
  db.collection("courses").doc(course).collection("questions").orderBy("createdAt","asc").get().then(snap=>{
    if(snap.empty){div.innerHTML='<div class="empty"><div class="empty-icon">üì≠</div>No questions in this course yet.</div>';return;}
    let html="";
    snap.forEach(doc=>{
      const d=doc.data(),id=doc.id;
      const opts=(d.options||[]).map((o,i)=>`<span class="q-opt-chip${i===d.correct?' correct':''}">${["A","B","C","D"][i]}: ${esc(o)}</span>`).join("");
      html+=`<div class="q-manage" id="qm_${id}">
        <div class="q-manage-top">
          <span class="q-text">${esc(d.question)}</span>
          <button class="btn-del" onclick="deleteQuestion('${escQ(course)}','${id}')">üóëÔ∏è Delete</button>
        </div>
        <div class="q-opts">${opts}</div>
      </div>`;
    });
    div.innerHTML=html;
  }).catch(e=>{div.innerHTML=`<div class="empty">${esc(e.message)}</div>`;});
}

function deleteQuestion(course,qid){
  if(!confirm("Delete this question? This cannot be undone."))return;
  db.collection("courses").doc(course).collection("questions").doc(qid).delete()
    .then(()=>{toast("üóëÔ∏è Question deleted!");loadManageQuestions();}).catch(e=>alert(e.message));
}

// TEST
let currentCourse="",currentQuestions=[],timeLeft=0,timerInt=null;

function startTest(course){
  currentCourse=course;
  g("testTitle").textContent="üìù "+course;
  g("testBox").style.display="block";
  g("questionArea").innerHTML='<div class="empty"><div class="empty-icon">‚è≥</div>Loading questions...</div>';
  g("qCountInfo").textContent="";
  stopTimer();
  db.collection("courses").doc(course).collection("questions").get().then(snap=>{
    currentQuestions=[];snap.forEach(doc=>currentQuestions.push(doc.data()));
    if(!currentQuestions.length){g("questionArea").innerHTML='<div class="empty"><div class="empty-icon">üì≠</div>No questions in this course yet.</div>';return;}
    g("qCountInfo").textContent=currentQuestions.length+" questions";
    renderTest();startTimer((currentQuestions[0].time||5)*60);
    g("testBox").scrollIntoView({behavior:"smooth"});
  }).catch(e=>alert(e.message));
}

function renderTest(){
  const div=g("questionArea");div.innerHTML="";
  const labels=["A","B","C","D"];
  currentQuestions.forEach((q,i)=>{
    let opts="";
    (q.options||[]).forEach((o,idx)=>{
      opts+=`<label class="opt" onclick="this.classList.add('selected');document.querySelectorAll('[name=q${i}]').forEach(r=>r.closest('.opt').classList.remove('selected'));this.classList.add('selected')">
        <input type="radio" name="q${i}" value="${idx}">
        <span style="font-weight:700;color:#4f46e5;min-width:20px;">${labels[idx]}.</span>
        <span>${esc(o)}</span>
      </label>`;
    });
    div.innerHTML+=`<div class="qbox fade-in">
      <b>Q${i+1}. ${esc(q.question)}</b>
      <div>${opts}</div>
    </div>`;
  });
}

function startTimer(s){stopTimer();timeLeft=s;updateTimer();timerInt=setInterval(()=>{timeLeft--;updateTimer();if(timeLeft<=0){stopTimer();submitTest();}},1000);}
function stopTimer(){if(timerInt){clearInterval(timerInt);timerInt=null;}}
function updateTimer(){
  const m=Math.floor(timeLeft/60),s=timeLeft%60;
  g("timerDisplay").textContent=(m<10?"0":"")+m+":"+(s<10?"0":"")+s;
  g("timerDisplay").style.background=timeLeft<=30?"linear-gradient(135deg,#ef4444,#dc2626)":"linear-gradient(135deg,#10b981,#059669)";
}
function closeTest(){stopTimer();g("testBox").style.display="none";}

function submitTest(){
  stopTimer();if(!currentQuestions.length){alert("No questions.");return;}
  let score=0;
  currentQuestions.forEach((q,i)=>{const sel=document.querySelector(`input[name="q${i}"]:checked`);if(sel&&parseInt(sel.value,10)===q.correct)score++;});
  const pct=Math.round((score/currentQuestions.length)*100);
  const msg=pct>=80?"üéâ Excellent!":pct>=60?"üëç Good job!":pct>=40?"üìö Keep practising!":"üí™ Don't give up!";
  alert(`${msg}\n\nScore: ${score}/${currentQuestions.length} (${pct}%)`);
  const u=auth.currentUser;
  db.collection("leaderboard").add({user:u.displayName||u.email||"Student",email:u.email||"",score,total:currentQuestions.length,pct,course:currentCourse,at:firebase.firestore.FieldValue.serverTimestamp()}).then(()=>loadLeaderboard());
  closeTest();
}

function loadLeaderboard(){
  const div=g("leaderboard");div.innerHTML='<div class="empty"><div class="empty-icon">‚è≥</div>Loading...</div>';
  db.collection("leaderboard").orderBy("pct","desc").orderBy("score","desc").limit(10).get().then(snap=>{
    if(snap.empty){div.innerHTML='<div class="empty"><div class="empty-icon">üèÖ</div>No scores yet. Be the first!</div>';return;}
    let html="",i=1;
    const rankClass=["r1","r2","r3"];
    snap.forEach(doc=>{
      const d=doc.data(),rc=i<=3?rankClass[i-1]:"rn",medal=i===1?"ü•á":i===2?"ü•à":i===3?"ü•â":i;
      html+=`<div class="lb-row">
        <div class="lb-rank ${rc}">${medal}</div>
        <div class="lb-name">${esc(d.user||"Student")}<div style="font-size:11px;color:#94a3b8;font-weight:600;">${esc(d.course||"")}</div></div>
        <div class="lb-score">${d.score}/${d.total} <span style="color:#94a3b8;font-weight:600;">(${d.pct}%)</span></div>
      </div>`;
      i++;
    });
    div.innerHTML=html;
  }).catch(e=>{div.innerHTML=`<div class="empty">${esc(e.message)}</div>`;});
}
</script>
</body>
</html>
